#! /usr/bin/env bash
################################################################################
# Static Kernel Analysis (SKA) project
################################################################################

# get the most current tag
tag=`git describe --abbrev=0 --tags`

# get the date that the most current tag was created
since=`git show --date=relative $tag | head -n 3 | tail -n 1 | sed 's,^Date:[ \t]*,,g'`

# build will count the number of commits since the current tag was created
build=`git log --since="$since" | grep commit | wc -l`

current=`echo $tag | sed 's,\..*$,,g'`
revision=`git log --since="$since" | grep commit | wc -l`
age=0

echo $current":"$revision":"$age
